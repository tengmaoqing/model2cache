/*!
 * VueDataCache.js v0.1.0
 * (c) 2014-2019 Teng Mao Qing
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VueDataCache=e()}(this,function(){"use strict";var t=Array.isArray,e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,a=r||n||Function("return this")(),o=a.Symbol,i=Object.prototype,u=i.hasOwnProperty,c=i.toString,s=o?o.toStringTag:void 0;var f=function(t){var e=u.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var a=c.call(t);return n&&(e?t[s]=r:delete t[s]),a},l=Object.prototype.toString;var v=function(t){return l.call(t)},h="[object Null]",p="[object Undefined]",y=o?o.toStringTag:void 0;var _=function(t){return null==t?void 0===t?p:h:y&&y in Object(t)?f(t):v(t)};var d=function(t){return null!=t&&"object"==typeof t},b="[object Symbol]";var g=function(t){return"symbol"==typeof t||d(t)&&_(t)==b},m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;var w=function(e,r){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!g(e))||j.test(e)||!m.test(e)||null!=r&&e in Object(r)};var O=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},S="[object AsyncFunction]",$="[object Function]",k="[object GeneratorFunction]",D="[object Proxy]";var P,z=function(t){if(!O(t))return!1;var e=_(t);return e==$||e==k||e==S||e==D},x=a["__core-js_shared__"],C=(P=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"";var E=function(t){return!!C&&C in t},M=Function.prototype.toString;var L=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},A=/^\[object .+?Constructor\]$/,F=Function.prototype,K=Object.prototype,T=F.toString,I=K.hasOwnProperty,N=RegExp("^"+T.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var J=function(t){return!(!O(t)||E(t))&&(z(t)?N:A).test(L(t))};var R=function(t,e){return null==t?void 0:t[e]};var U=function(t,e){var r=R(t,e);return J(r)?r:void 0},G=U(Object,"create");var Q=function(){this.__data__=G?G(null):{},this.size=0};var V=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Y="__lodash_hash_undefined__",q=Object.prototype.hasOwnProperty;var B=function(t){var e=this.__data__;if(G){var r=e[t];return r===Y?void 0:r}return q.call(e,t)?e[t]:void 0},H=Object.prototype.hasOwnProperty;var W=function(t){var e=this.__data__;return G?void 0!==e[t]:H.call(e,t)},X="__lodash_hash_undefined__";var Z=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=G&&void 0===e?X:e,this};function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=Q,tt.prototype.delete=V,tt.prototype.get=B,tt.prototype.has=W,tt.prototype.set=Z;var et=tt;var rt=function(){this.__data__=[],this.size=0};var nt=function(t,e){return t===e||t!=t&&e!=e};var at=function(t,e){for(var r=t.length;r--;)if(nt(t[r][0],e))return r;return-1},ot=Array.prototype.splice;var it=function(t){var e=this.__data__,r=at(e,t);return!(r<0||(r==e.length-1?e.pop():ot.call(e,r,1),--this.size,0))};var ut=function(t){var e=this.__data__,r=at(e,t);return r<0?void 0:e[r][1]};var ct=function(t){return at(this.__data__,t)>-1};var st=function(t,e){var r=this.__data__,n=at(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ft.prototype.clear=rt,ft.prototype.delete=it,ft.prototype.get=ut,ft.prototype.has=ct,ft.prototype.set=st;var lt=ft,vt=U(a,"Map");var ht=function(){this.size=0,this.__data__={hash:new et,map:new(vt||lt),string:new et}};var pt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var yt=function(t,e){var r=t.__data__;return pt(e)?r["string"==typeof e?"string":"hash"]:r.map};var _t=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e};var dt=function(t){return yt(this,t).get(t)};var bt=function(t){return yt(this,t).has(t)};var gt=function(t,e){var r=yt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}mt.prototype.clear=ht,mt.prototype.delete=_t,mt.prototype.get=dt,mt.prototype.has=bt,mt.prototype.set=gt;var jt=mt,wt="Expected a function";function Ot(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(wt);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(Ot.Cache||jt),r}Ot.Cache=jt;var St=Ot,$t=500;var kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/\\(\\)?/g,Pt=function(t){var e=St(t,function(t){return r.size===$t&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(kt,function(t,r,n,a){e.push(n?a.replace(Dt,"$1"):r||t)}),e});var zt=function(t,e){for(var r=-1,n=null==t?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a},xt=1/0,Ct=o?o.prototype:void 0,Et=Ct?Ct.toString:void 0;var Mt=function e(r){if("string"==typeof r)return r;if(t(r))return zt(r,e)+"";if(g(r))return Et?Et.call(r):"";var n=r+"";return"0"==n&&1/r==-xt?"-0":n};var Lt=function(t){return null==t?"":Mt(t)};var At=function(e,r){return t(e)?e:w(e,r)?[e]:Pt(Lt(e))},Ft=1/0;var Kt=function(t){if("string"==typeof t||g(t))return t;var e=t+"";return"0"==e&&1/t==-Ft?"-0":e};var Tt=function(t,e){for(var r=0,n=(e=At(e,t)).length;null!=t&&r<n;)t=t[Kt(e[r++])];return r&&r==n?t:void 0};var It=function(t,e,r){var n=null==t?void 0:Tt(t,e);return void 0===n?r:n},Nt=function(){try{var t=U(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Jt=function(t,e,r){"__proto__"==e&&Nt?Nt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Rt=Object.prototype.hasOwnProperty;var Ut=function(t,e,r){var n=t[e];Rt.call(t,e)&&nt(n,r)&&(void 0!==r||e in t)||Jt(t,e,r)},Gt=9007199254740991,Qt=/^(?:0|[1-9]\d*)$/;var Vt=function(t,e){var r=typeof t;return!!(e=null==e?Gt:e)&&("number"==r||"symbol"!=r&&Qt.test(t))&&t>-1&&t%1==0&&t<e};var Yt=function(t,e,r,n){if(!O(t))return t;for(var a=-1,o=(e=At(e,t)).length,i=o-1,u=t;null!=u&&++a<o;){var c=Kt(e[a]),s=r;if(a!=i){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=O(f)?f:Vt(e[a+1])?[]:{})}Ut(u,c,s),u=u[c]}return t};var qt=function(t,e,r){return null==t?t:Yt(t,e,r)},Bt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ht=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Wt={},Xt=function(){function t(){Bt(this,t),this.init.apply(this,arguments)}return Ht(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.vm=t,this.cacheKeys=t.$options.cacheKeys.map(function(t){var e={key:"",useLocalStore:!0};return"string"==typeof t?e.key=t:Object.assign(e,t),e})||[],this.cachePrefix=e.cachePrefix||"__TMQ_DEFAULT_KEY__",this.MemCache=Wt}},{key:"getLocalDate",value:function(t){var e=localStorage.getItem(""+this.cachePrefix+t);return e?JSON.parse(e):It(this.vm,t)}},{key:"getMemData",value:function(t){return this.MemCache[t]}},{key:"setLocalDate",value:function(t,e){localStorage.setItem(""+this.cachePrefix+t,JSON.stringify(e))}},{key:"setMemData",value:function(t,e){this.MemCache[t]=e}},{key:"applyData",value:function(){var t=this;this.cacheKeys.forEach(function(e){var r=e.key,n="";n=e.useLocalStore?t.getLocalDate(r):t.getMemData(r),qt(t.vm,r,n)})}},{key:"watchData",value:function(){var t=this;this.watchs=this.cacheKeys.map(function(e){var r=e.key,n=e.useLocalStore;return t.vm.$watch(r,function(e){n?t.setLocalDate(r,e):t.setMemData(r,e)})})}},{key:"destory",value:function(){this.watchs.forEach(function(t){return t()})}},{key:"reset",value:function(){}}]),t}();return{install:function(t,e){t.mixin({mounted:function(){this.$options.cacheKeys&&(this.$autoSave=new Xt(this,e),this.$autoSave.applyData(),this.$autoSave.watchData())},destroyed:function(){this.$options.cacheKeys&&this.$autoSave.destory()}})}}});